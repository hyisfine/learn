> 框架。小程序的架构分为多个渲染层、逻辑层。微信客户端通过event和data对两个线程的通信进行中转。
>
> 分包机制。独立分包、异步分包、分包预下载。
>
> 性能优化，减少不必要的setdata、使用分包机制、首屏预渲染、按需注入。代码压缩。
>
> 为什么分为视图层、逻辑层和系统平台：视图层和逻辑是独立的线程可同时运行且在不同的执行环境中，通过微信层使用event和data进行数据传输和交互，可以调用系统平台提供的api和原生组件，并抹平多端宿主环境的差异性
>
> 微信扫一扫实现原理：pc端生成一个包含全局唯一id的二维码，用户使用微信扫一扫后获取用户授权信息，然后与获取到的id进行绑定，发送数据到pc端。

> 双线程模型：渲染线程 逻辑线程。通过微信平台作为中间层，1⃣️js beige进行通信，逻辑层把数据变化通知到视图层，触发视图层页面更新，视图层把触发的事件通知到逻辑层进行业务处理。
>
> 　　双线程模型是小程序框架与业界大多数前端 Web 框架不同之处。基于这个模型，可以更好地管控以及提供更安全的环境。缺点是带来了无处不在的异步问题（任何数据传递都是线程间的通信，也就是都会有一定的延时），不过小程序在框架层面已经封装好了异步带来的时序问题。
>
> 小程序的UI视图和逻辑处理是用多个webview实现的，逻辑处理的JS代码全部加载到一个Webview里面，称之为AppService，整个小程序只有一个，并且整个生命周期常驻内存，而所有的视图（wxml和wxss）都是单独的Webview来承载，称之为AppView。
>
> 　　所以一个小程序打开至少就会有2个webview进程，正式因为每个视图都是一个独立的webview进程，
>
> 小程序的逻辑层和渲染层是分开的，逻辑层运行在 JSCore 中，并没有一个完整浏览器对象，因而缺少相关的DOM API和BOM API。
>
> 　我们知道小程序是有自己的组件的，这些基本组件就是基于 `Exparser` 框架。 `Exparser` 基于 `WebComponents` 的 `ShadowDOM` 模型，但是不依赖浏览器的原生支持，而且可在 纯 `JS` 环境中运行。
