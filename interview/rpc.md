rpc http区别：http 超文本传输协议，是客户端和移动端约定的数据传输格式，基于tcp进行数据传输。rpc 是远程程序调用，是指服务器调用服务器。rpc可以通过http实现也可以通过tcp实现。为什么需要rpc协议：在调用其他服务器的接口时，希望像是在调用本地接口一样。http协议在各服务器间都通用但是太冗余，性能也不好。

http vs rpc

而RPC，因为它定制化程度更高，可以采用体积更小的protobuf或其他序列化协议去保存结构体数据，同时也不需要像HTTP那样考虑各种浏览器行为，比如302重定向跳转啥的。因此性能也会更好一些，这也是在公司内部微服务中抛弃HTTP，选择使用RPC的最主要原因。简单高效通用

典型的 RPC 架构可划成三部分：

1）服务提供者（RPC Server）:运行在服务端，提供服务接口定义和服务实现类。

2）服务消费者（RPC Client）:运行在客户端的，通过远程代理对象调用远程服务。

3）注册中心（Registry）:也是运行在服务端，负责把本地服务发布成远程的服务，它也要去管理，提供给服务消费者来使用的。

通过上面的图可以看出，一次简单的 RPC 调用可以分为以下几个步骤：

（1）服务提供者启动后主动向注册中心注册机器ip、端口以及提供的服务列表；

（2）服务消费者在启动时到注册中心获取服务提供方地址列表，在本地缓存一份；

（3）服务消费者通过本地调用的方式调用服务，调用模块收到请求后通过负载均衡策略选取合适的远程服务地址；

（4）协议模块负责把方法、入参等信息进行序列化(编码)成能够进行网络传输的消息体，并将消息通过网络发送给服务端；

（5）服务端收到消息后进行解码(反序列化操作)。

（6）根据解码结果调用本地的服务进行相关处理；

（7）服务端将处理返回的结果进行序列化（编码），并将结果通过网络发送至服务消费者；

（8）服务消费者收到消息后进行解码最终得到结果；

一个完整的商用 RPC 框架有很多功能，最最核心的基本功能就是三个：服务寻址、数据编解码、网络传输。

为什么需要序列化：参数和返回值可能是对象，对象需要序列化为二进制，可以使用protobuf或者json XML Thrift